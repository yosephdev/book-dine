{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container my-5">
    <div class="row">
        <div class="col-md-6">
            <img src="{% static 'images/restaurant-placeholder.jpg' %}" class="img-fluid mb-4"
                alt="{{ restaurant.name }}">
        </div>
        <div class="col-md-6">
            <h1>{{ restaurant.name }}</h1>
            <p><strong>Address:</strong> {{ restaurant.formatted_address }}</p>
            <p><strong>Rating:</strong> {{ restaurant.rating }} ({{ restaurant.user_ratings_total }} reviews)</p>
            {% if restaurant.opening_hours %}
            <p><strong>Opening Hours:</strong></p>
            <ul>
                {% for period in restaurant.opening_hours.weekday_text %}
                <li>{{ period }}</li>
                {% endfor %}
            </ul>
            {% endif %}
            {% if restaurant.website %}
            <p><a href="{{ restaurant.website }}" target="_blank">Visit Website</a></p>
            {% endif %}
        </div>
    </div>

    <hr>

    <h2>Make a Reservation</h2>
    {% if restaurant.place_id %}
    <form method="post" action="{% url 'make_reservation' restaurant.place_id|default:'invalid_place_id' %}">
        {% csrf_token %}
        <div class="form-group">
            {{ form.table.errors }}
            <label for="{{ form.table.id_for_label }}">Table:</label>
            {{ form.table }}
        </div>
        <div class="form-group">
            {{ form.date.errors }}
            <label for="{{ form.date.id_for_label }}">Date:</label>
            {{ form.date }}
        </div>
        <div class="form-group">
            {{ form.time.errors }}
            <label for="{{ form.time.id_for_label }}">Time:</label>
            {{ form.time }}
        </div>
        <div class="form-group">
            {{ form.number_of_guests.errors }}
            <label for="{{ form.number_of_guests.id_for_label }}">Number of Guests:</label>
            {{ form.number_of_guests }}
        </div>
        <div class="form-group">
            {{ form.special_requests.errors }}
            <label for="{{ form.special_requests.id_for_label }}">Special Requests:</label>
            {{ form.special_requests }}
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
    {% else %}
    <p>Unable to make a reservation for this restaurant.</p>
    {% endif %}
</div>
{% endblock %}